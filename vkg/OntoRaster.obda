[PrefixDeclaration]
:		http://www.semanticweb.org/arkaghosh/OntoRaster/
geo:		http://www.opengis.net/ont/geosparql#
owl:		http://www.w3.org/2002/07/owl#
rdf:		http://www.w3.org/1999/02/22-rdf-syntax-ns#
xml:		http://www.w3.org/XML/1998/namespace
xsd:		http://www.w3.org/2001/XMLSchema#
obda:		https://w3id.org/obda/vocabulary#
rdfs:		http://www.w3.org/2000/01/rdf-schema#
sosa:		http://www.w3.org/ns/sosa/
rasdb:		http://www.semanticweb.org/RasterDataCube/

[MappingDeclaration] @collection [[
mappingId	check_rasdaman_conn
target		:{gid} rdfs:label {output}^^xsd:string . 
source		SELECT 777 as gid, rasdaman_op.check_rasdaman_conn() AS output

mappingId	mapping_region_class
target		:region/{gid} a :Region . 
source		select gid from region_bavaria;

mappingId	mapping_region_name
target		:region/{gid} rdfs:label {region_name}^^xsd:string . 
source		select gid, region_name from region_bavaria;

mappingId	mapping_region_geom
target		:region/{gid} geo:asWKT {geom}^^geo:wktLiteral . 
source		select gid, geom from region_bavaria;

mappingId	mapping_rastername
target		:raster/{raster_id} rasdb:hasRasterName {raster_name}^^xsd:string . 
source		select raster_id, raster_name from petascopedb.rastername;

mappingId	mapping_datetime
target		:raster/{raster_id} rasdb:hasStartTime {start_time}^^xsd:integer ; rasdb:hasEndTime {end_time}^^xsd:integer . 
source		select raster_id, start_time, end_time from petascopedb.rastername;

mappingId	mapping_scale_factor
target		:raster/{raster_id} rasdb:hasScaleFactor {sf}^^xsd:integer . 
source		select raster_id, start_time, end_time from petascopedb.rastername;

mappingId	getRasterArray
target		:{gid} :getArray {filtered_array}^^xsd:double . 
source		SELECT m.gid as gid,
			rasdaman_op.query2array('select m[49:50, 0:* , 0:*] from Bavaria_Temperature_MODIS_1km as m') AS filtered_array
			FROM   region_bavaria as m

mappingId	averageRASTER
target		:{gid} :averageRASTER {output}^^xsd:double . 
source		SELECT  m.gid AS gid, rasdaman_op.query2numeric(CONCAT('select avg_cells(clip((c[100, 0:* , 0:*]*0.02) - 273.15,',rasdaman_op.geo2grid_coords(ST_AsText((ST_Dump(m.geom)).geom)),')) from Bavaria_Temperature_MODIS_1km AS c')) AS avg_temp
			FROM    region_bavaria as m
			WHERE   m.name_2 = 'Deggendorf'
]]

